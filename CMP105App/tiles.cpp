#include "tiles.h"

tiles::tiles()
{
	tileMap.loadTexture("gfx/rainbow_tiles.png");


	for (int i = 0; i < 17; i++)
	{
		tile.setSize(sf::Vector2f(50, 50));
		tile.setCollisionBox(0, 0, 50, 50);
		tile.setCollider(true);
		tile.setAlive(true);
		game_tiles.push_back(tile);
	}

	game_tiles[0].setTextureRect(sf::IntRect(30, 30, 9, 9));
	game_tiles[0].setCollider(false);
	game_tiles[1].setTextureRect(sf::IntRect(0, 0, 9, 9));
	game_tiles[2].setTextureRect(sf::IntRect(10, 0, 9, 9));
	game_tiles[3].setTextureRect(sf::IntRect(20, 0, 9, 9));
	game_tiles[4].setTextureRect(sf::IntRect(0, 10, 9, 9));
	game_tiles[5].setTextureRect(sf::IntRect(10, 10, 9, 9));
	game_tiles[6].setTextureRect(sf::IntRect(20, 10, 9, 9));
	game_tiles[7].setTextureRect(sf::IntRect(0, 20, 9, 9));
	game_tiles[8].setTextureRect(sf::IntRect(10, 20, 9, 9));
	game_tiles[9].setTextureRect(sf::IntRect(20, 20, 9, 9));
	game_tiles[10].setTextureRect(sf::IntRect(0, 40, 9, 9));
	game_tiles[11].setTextureRect(sf::IntRect(10, 40, 9, 9));
	game_tiles[12].setTextureRect(sf::IntRect(20, 40, 9, 9));
	game_tiles[13].setTextureRect(sf::IntRect(10, 30, 9, 9));
	game_tiles[14].setTextureRect(sf::IntRect(0, 50, 9, 9));
	game_tiles[15].setTextureRect(sf::IntRect(10, 50, 9, 9));
	game_tiles[16].setTextureRect(sf::IntRect(20, 50, 9, 9));

	if (game_tiles[13].isAlive() == true)
	{
		num = 13;
	}
	else { num = 0; }

	tileMap.setTileSet(game_tiles);

	sf::Vector2u mapSize(200, 12);

	std::vector<int> map = {
		0,  0,  0,  0, 0, 0, 0, 0, 0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0, 0, 0, 0, 0, 0, 0,  0,  0, 0, 0, 0,  0,  0, 0, 0, 0, 14, 16, 0,  1,  3, 0, 0, 0, 0, 0, 0, 1, 3, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 16,  0,  0,  0,  0,  1,  3, 0, 0, 0, 0, 0, 0,14,16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  1,  3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
		0,  0,  0,  0, 0, 0, 0, 0, 0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0, 0, 0, 0, 0, 0, 0,  0,  0, 0, 0, 0, 14, 16, 0, 0, 0,  0,  0, 0,  4,  6, 0, 0, 0, 0, 0, 0, 4, 6,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,14,16,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
		0,  0,  0,  0, 0, 0, 0, 0, 0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0, 0, 0, 0, 0, 0, 0,  0,  0, 0, 0, 0,  0,  0, 0, 0, 0,  0,  0, 0,  4,  6, 0, 0, 0, 0, 0, 0, 4, 6,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 14,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,14,16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
		0,  0,  0,  0, 0, 0, 0, 0, 0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0, 0, 0, 0, 0, 0, 0,  0,  0, 0, 0, 0,  0,  0, 0, 0, 0,  0,  0, 0,  4,  6, 0, 0, 0, 0, 0, 0, 4, 6,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 14,  4,  6,14,16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,14,16, 0, 0, 0, 0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
		0,  0,  0,  0, 0, 0, 0, 0, 0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0, 0, 0, 0, 0, 0, 0, 14, 16, 0, 0, 0,  0,  0, 0, 0, 0,  0,  0, 0,  4,  6, 0, 0, 0, 0, 0, 0, 4, 6,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 14, 15, 15, 15, 15,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,14,16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
		0,  0,  0,  0, 0, 0, 0, 0, 0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0, 0, 0, 0, 0, 0, 0,  0,  0, 0, 0, 0,  0,  0, 0, 0, 0,  0,  0, 0,  4,  6, 0, 0, 0, 0, 0, 0, 4, 6,  0,  0,  0,  0,  0,  0, 14, 15, 15, 16,  0,  0,  0,  0,  0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 1, 3, 0, 0, 0, 0, 0, 1, 3, 0, 0, 0, 0, 0, 1, 3, 0, 0, 0, 0, 0, 1, 3, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  2,  2,  3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
		0,  0,  0,  0, 0, 0, 0, 0, 0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 1, 3, 0, 0, 0, 1, 3, 0, 0, 0, 0, 1, 3, 0, 0, 0, 0,  1,  3, 0, 0, 0, 0, 0, 0,  0,  0, 0, 0, 0,  0,  0, 0, 0, 0,  0,  0, 0,  4,  6, 0, 0, 0, 0, 0, 0, 4, 6,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,14,16, 0, 0, 0, 0, 0, 0, 0, 0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 4, 6, 0, 0, 0, 0, 0, 4, 6, 0, 0, 0, 0, 0, 4, 6, 0, 0, 0, 0, 0, 4, 6, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0,  0,  4,  5,  5,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
		0, 14, 15, 16, 0, 0, 0, 0, 0,  0,  0,  0, 0, 0, 0, 1, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  1,  2,  3, 0, 0, 0, 0, 4, 6, 0, 0, 0, 4, 6, 0, 0, 0, 0, 4, 6, 0, 0, 0, 0,  4,  6, 0, 0, 0, 0, 0, 0,  0,  0, 0, 0, 0, 14, 16, 0, 0, 0,  0,  0, 0,  4,  6, 0, 0, 0, 0,14,16, 7, 9,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 4, 6, 0, 0, 0, 0, 0, 4, 6, 0, 0, 0, 0, 0, 4, 6, 0, 0, 0, 0, 0, 4, 6, 0, 0, 0, 0,  0,  0,  0,  0,  1,  2,  2,  2, 10, 12, 12, 13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
		0,  0,  0,  0, 0, 0, 0, 0, 0,  0,  0,  0, 0, 0, 0, 7, 8, 9, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  4,  5,  6, 0, 0, 0, 0, 7, 9, 0, 0, 0, 7, 9, 0, 0, 0, 0, 7, 9, 0, 0, 0, 0,  4,  6, 0, 0, 0, 0, 0, 0,  0,  0, 0, 0, 0,  0,  0, 0, 0, 0, 14, 16, 0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 16,  0,  0,  0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 7, 9, 0, 0, 0, 0, 0, 7, 9, 0, 0, 0, 0, 0, 7, 9, 0, 0, 0, 0, 0, 7, 9, 0, 0, 0, 0,  0,  0,  0,  0,  4,  5,  5,  5,  5,  5,  5,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
		0,  0,  0,  0, 0, 0, 0, 0, 0,  1,  2,  3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  1,  2,  2,  2, 10, 12, 13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  4,  6, 0, 0, 0, 0, 0, 0,  0,  0, 0, 0, 0,  0,  0, 0, 0, 0,  0,  0, 0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  1,  2,  2,  2, 10, 12, 12, 12, 12, 12, 12, 13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
		0,  0,  0,  0, 0, 0, 0, 0, 0,  4,  5,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  4,  5,  5,  5,  5,  5,  6, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  4,  6, 0, 0, 0, 0, 0, 0,  0,  0, 0, 0, 0,  0,  0, 0, 0, 0,  0,  0, 0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  4,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  4,  5,  5,  5,  5,  5,  5,  5,  5,  5,  5,  6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
		2,  2,  2,  2, 2, 2, 2, 2, 2, 10, 12, 11, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 10, 12, 12, 12, 12, 12, 11, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 10, 11, 2, 2, 2, 2, 2, 2,  2,  2, 2, 2, 2,  2,  2, 2, 2, 2,  2,  2, 2, 10, 11, 2, 2, 2, 2, 2, 2, 2, 2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2, 10, 11, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 10, 11, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 10, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 11, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2
	};

	tileMap.setTileMap(map, mapSize);
	tileMap.setPosition(sf::Vector2f(0, 257));
	tileMap.buildLevel();



}

tiles::~tiles()
{

}

void tiles::render(sf::RenderWindow* window)
{
	tileMap.render(window);
}

void tiles::collisionCheck(player* player)
{
	std::vector<GameObject>* world = tileMap.getLevel();
	for (int i = 0; i < (int)world->size(); i++)
	{
		if ((*world)[i].isCollider())
		{
			if (Collision::checkBoundingBox(player, &(*world)[i]))
			{
				player->collision_resp_tile(&(*world)[i]);
			}
		}
	}
}


